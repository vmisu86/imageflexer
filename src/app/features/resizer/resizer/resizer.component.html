<div class="resizer-container">
    <div class="section-header">
        <h2>Image Resizer</h2>
        <p>Resize images fast: add files, choose a preset or custom size, then process.</p>
    </div>

    <nz-card>
        <div class="panel-header">
            <div class="steps">
                <div class="step-title">Quick steps</div>
                <div class="step-list">1) Add images  2) Choose size  3) Process & download</div>
            </div>
            <div class="status">
                <nz-tag [nzColor]="isProcessing ? 'processing' : 'success'">
                    {{ isProcessing ? 'Processingâ€¦' : 'Ready' }}
                </nz-tag>
                <span class="status-hint" *ngIf="isProcessing && progress.total > 0">
                    Processing {{ progress.current }} / {{ progress.total }}
                </span>
                <span class="status-hint" *ngIf="isProcessing && progress.total === 0">Working on your files</span>
                <span class="status-hint" *ngIf="!isProcessing">Drop files or click select</span>
            </div>
        </div>

        <div class="control-bar">
            <div class="control">
                <label>Preset</label>
                <nz-select name="resizer-preset" [(ngModel)]="selectedPreset" (ngModelChange)="onPresetChange()"
                    [ngModelOptions]="{standalone: true}">
                    <nz-option *ngFor="let preset of presetSizes" [nzValue]="preset" [nzLabel]="preset.label">
                    </nz-option>
                </nz-select>
            </div>
            <div class="control numeric">
                <label>Max width (px)</label>
                <nz-input-number name="resizer-maxWidth" [(ngModel)]="config.maxWidth" [nzMin]="1" [nzMax]="10000"
                    [ngModelOptions]="{standalone: true}" [nzStep]="10">
                </nz-input-number>
            </div>
            <div class="control numeric">
                <label>Max height (px)</label>
                <nz-input-number name="resizer-maxHeight" [(ngModel)]="config.maxHeight" [nzMin]="1" [nzMax]="10000"
                    [ngModelOptions]="{standalone: true}" [nzStep]="10">
                </nz-input-number>
            </div>
            <div class="control">
                <label>Quality</label>
                <nz-slider name="resizer-quality" [(ngModel)]="config.quality" [nzMin]="1" [nzMax]="100"
                    [ngModelOptions]="{standalone: true}">
                </nz-slider>
            </div>
            <div class="control checkbox-control">
                <label class="sr-only">Aspect ratio</label>
                <label nz-checkbox name="resizer-aspect" [(ngModel)]="config.preserveAspectRatio" [ngModelOptions]="{standalone: true}">
                    Preserve aspect ratio
                </label>
            </div>
        </div>

        <app-file-dropzone [isProcessing]="isProcessing" (process)="processImages($event)">
        </app-file-dropzone>
    </nz-card>

    <app-image-preview [images]="imageService.getProcessedImages()" [showComparison]="true" [summary]="summary"
        (download)="downloadImage($event)" (downloadAll)="downloadAll()" (clear)="clearResults()">
    </app-image-preview>
</div>
