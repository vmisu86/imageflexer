<div class="converter-container">
    <div class="section-header">
        <h2>Image Format Converter</h2>
        <p>Convert images quickly: add files, pick a format/quality, then download.</p>
    </div>

    <nz-card>
        <div class="panel-header">
            <div class="steps">
                <div class="step-title">Quick steps</div>
                <div class="step-list">1) Add images  2) Pick format/quality  3) Process & download</div>
            </div>
            <div class="status">
                <nz-tag [nzColor]="isProcessing ? 'processing' : 'success'">
                    {{ isProcessing ? 'Processingâ€¦' : 'Ready' }}
                </nz-tag>
                <span class="status-hint" *ngIf="isProcessing">Working on your files</span>
                <span class="status-hint" *ngIf="!isProcessing">Drop files or click select</span>
            </div>
        </div>

        <div class="control-bar">
            <div class="control">
                <label>Target format</label>
                <nz-select [(ngModel)]="config.format" [ngModelOptions]="{standalone: true}">
                    <nz-option *ngFor="let option of formatOptions" [nzValue]="option.value" [nzLabel]="option.label">
                    </nz-option>
                </nz-select>
            </div>
            <div class="control slider-control">
                <label>Quality</label>
                <nz-slider [(ngModel)]="config.quality" [nzMin]="1" [nzMax]="100" [nzDisabled]="config.format === 'image/png'"
                    [ngModelOptions]="{standalone: true}">
                </nz-slider>
                <div *ngIf="config.format === 'image/png'" class="hint-text">
                    PNG ignores quality (lossless)
                </div>
            </div>
        </div>

        <app-file-dropzone [isProcessing]="isProcessing" (process)="processImages($event)">
        </app-file-dropzone>
    </nz-card>

    <app-image-preview [images]="imageService.getProcessedImages()" [showComparison]="true"
        (download)="downloadImage($event)" (downloadAll)="downloadAll()" (clear)="clearResults()">
    </app-image-preview>
</div>
